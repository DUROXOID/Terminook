#include <stdio.h>
#include <stdlib.h>
#define width 210
#define height 25
#define area width*height
#define column 1
#define row width
#define air ' '
#define platform '_'
#define Uslope '/'
#define Dslope '\\'
#define Rcloud '('
#define Lcloud ')'
#define plant '|'
#define flower '@'
#define stem '+'
#define seed 13
int main(int argc, char** argv) {
	int t;
	int i;
	int userIndex;
	char term[area];
	userIndex = width*20+ 12;
	for(i = 1; i <= area; i++){
		term[i] = air;
	}
	i =1+ userIndex -(userIndex %width);
	while(!(i%width == 0)){
		switch (rand()%seed%i){
			case 0:
				i+= row;
				term[i] = Dslope;
				i+= column;
				term[i] = platform;
				i+= column;
			case 1:
				term[i] = Uslope;
				i-= row - column;
			default:
				term[i] = platform;
				i+= column;
		}
	}
	userIndex -=5;
	while (0 == 0){
		//player controlled movement
		t = getchar();
		if(t == 97){
			userIndex -= column;
		}else if(t == 100){
			userIndex += column;
		}else if(t == 103){
			userIndex = 310;
		}
		//terrain edited movement and render
		if(t == 97 || t == 100){
			if(term[userIndex] == Uslope || term[userIndex] == Dslope){
				userIndex -= row;
			} else if(term[userIndex] == air){
				userIndex += row;
			}	
			system("cls");
			for(i = 1; i <= area; i++){
				//render player
				if (i ==userIndex){
					printf("A");
				}else if (i == userIndex-row){
					printf("|");
				}else if (i ==userIndex-row-column){
					printf("/");
				}else if (i ==userIndex-row+column){
					printf("\\");
				}else if (i ==userIndex-2*(row)){
					printf("o");	
				}else{
					//render world
					putchar(term[i]);
				}
				if(i%width == 0){
					printf("\n");
				}
			}
		}
	}
}
